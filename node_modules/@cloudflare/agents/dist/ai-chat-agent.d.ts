import { Agent, AgentContext } from "./index.js";
import { Message, StreamTextOnFinishCallback } from "ai";
import { Connection, WSMessage } from "partyserver";
import "cloudflare:workers";

declare class AIChatAgent<Env = unknown> extends Agent<Env> {
  messages: Message[];
  constructor(ctx: AgentContext, env: Env);
  private sendChatMessage;
  private broadcastChatMessage;
  onMessage(connection: Connection, message: WSMessage): Promise<void>;
  onRequest(request: Request): Promise<Response>;
  onChatMessage(
    onFinish: StreamTextOnFinishCallback<any>
  ): Promise<Response | undefined>;
  saveMessages(messages: Message[]): Promise<void>;
  private persistMessages;
  private reply;
}

export { AIChatAgent };
